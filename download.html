<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Secure Access</title>

<style>
/* ========== BASE ========== */
*{
  box-sizing:border-box;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
}
body{
  margin:0;
  background:#f4f6fb;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
}
.hidden{display:none}

/* ========== WATERMARK ========== */
.watermark{
  position:fixed;
  inset:0;
  background:
    radial-gradient(circle at center,
      rgba(0,0,0,0.035) 0,
      rgba(0,0,0,0.035) 1px,
      transparent 1px),
    repeating-linear-gradient(
      45deg,
      transparent 0,
      transparent 60px,
      rgba(0,0,0,0.025) 60px,
      rgba(0,0,0,0.025) 120px
    );
  pointer-events:none;
}

/* ========== CARD ========== */
.card{
  width:100%;
  max-width:420px;
  background:#fff;
  border-radius:24px;
  padding:26px;
  box-shadow:0 20px 60px rgba(0,0,0,.12);
  position:relative;
  z-index:2;
}

/* ========== AVATAR ========== */
.avatar-wrap{
  display:flex;
  justify-content:center;
  margin-bottom:14px;
}
.avatar-ring{
  width:130px;
  height:130px;
  border-radius:50%;
  padding:4px;
  background:#000;
}
.avatar-ring img{
  width:100%;
  height:100%;
  border-radius:50%;
  object-fit:cover;
  object-position:center top;
  display:block;
}

/* ========== LOGO ========== */
.logo{
  text-align:center;
  font-family:"Times New Roman",serif;
  font-size:42px;
  font-weight:bold;
  margin-bottom:10px;
}

/* ========== INPUTS & BUTTONS ========== */
input{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:1px solid #ddd;
  font-size:14px;
  margin-top:12px;
}
button{
  width:100%;
  padding:14px;
  border:none;
  border-radius:14px;
  background:#000;
  color:#fff;
  font-size:15px;
  font-weight:600;
  cursor:pointer;
  margin-top:12px;
}
button:disabled{
  background:#888;
  cursor:not-allowed;
}

.hint{
  font-size:12px;
  color:#555;
  margin-top:8px;
  line-height:1.5;
}

/* ========== TIMER ========== */
.timer{
  background:#000;
  color:#fff;
  padding:14px;
  border-radius:16px;
  text-align:center;
  font-weight:600;
  margin:16px 0;
}

/* ========== SECTION ========== */
.section{
  background:#f7f7f7;
  border-radius:16px;
  padding:16px;
  margin-top:16px;
}
.section strong{
  display:block;
  margin-bottom:8px;
}

/* ========== IFRAME ========== */
iframe{
  width:100%;
  height:200px;
  border:none;
  border-radius:12px;
}
</style>
</head>

<body>
<div class="watermark"></div>

<div class="card">

<!-- LOGIN -->
<div id="loginBox">
  <div class="avatar-wrap">
    <div class="avatar-ring">
      <img src="avatar.png" alt="Avatar">
    </div>
  </div>
  <div class="logo">PW</div>

  <input id="sitePass" type="password" placeholder="Enter website password">
  <button id="loginBtn" onclick="checkLogin()">Continue</button>

  <div class="hint">
    Format: RS@DDMMYYYY<br>
    Example: RS@01012025
  </div>
  <div id="loginErr" class="hint"></div>
</div>

<!-- DASHBOARD -->
<div id="content" class="hidden">

  <div class="avatar-wrap">
    <div class="avatar-ring" style="width:90px;height:90px">
      <img src="avatar.png">
    </div>
  </div>
  <div class="logo">ACCESS GRANTED</div>

  <div class="timer" id="sessionTimer"></div>

  <!-- VIDEO -->
  <div class="section">
    <strong>Instruction Video</strong>
    <iframe loading="lazy"
      src="https://drive.google.com/file/d/16WmuBH_ycBUAsqNYaSDnJ9nbS5s2JF2s/preview">
    </iframe>
  </div>

  <!-- WEBSITE -->
  <div class="section">
    <button onclick="window.open('https://rarestudy.site','_blank')">
      Open Website
    </button>
  </div>

  <!-- APK -->
  <div class="section">
    <strong>APK Download (Android only)</strong>
    <input id="apkPass" type="password" placeholder="Enter APK password">
    <button id="apkBtn" onclick="unlockAPK()">Unlock APK</button>
    <div class="hint">
      Format: APK@DDMMYYYY<br>
      Example: APK@01012025
    </div>
    <div id="apkErr" class="hint"></div>

    <a id="apkLink" class="hidden" href="#">
      <button>Download APK</button>
    </a>
  </div>

  <!-- INSTRUCTIONS -->
  <div class="section">
    <strong>Instructions</strong>
    • Use Chrome / Edge / Opera Mini<br>
    • If any extra page opens, press BACK once only<br>
    • Turn OFF Private DNS if enabled<br>
    • VPN may be required in some regions<br>
    • Access valid for 24 hours only (copyright reasons)
  </div>

</div>
</div>

<script>
/* ========== CONSTANTS ========== */
const DAY = 24 * 60 * 60 * 1000;
const MAX_ATTEMPTS = 3;

/* ========== DATE PASSWORD ========== */
function today(){
  const d=new Date();
  return String(d.getDate()).padStart(2,'0')+
         String(d.getMonth()+1).padStart(2,'0')+
         d.getFullYear();
}
const SITE_PASSWORD = "RS@" + today();
const APK_PASSWORD  = "APK@" + today();

/* ========== WEBSITE LOGIN ========== */
function checkLogin(){
  const now = Date.now();

  let attempts = parseInt(localStorage.getItem("siteAttempts")) || MAX_ATTEMPTS;
  let blocked  = parseInt(localStorage.getItem("siteBlocked")) || 0;

  if(now < blocked){
    loginErr.textContent = "Too many attempts. Try again after 24 hours.";
    sitePass.disabled = true;
    loginBtn.disabled = true;
    return;
  }

  if(sitePass.value !== SITE_PASSWORD){
    attempts--;
    localStorage.setItem("siteAttempts", attempts);

    if(attempts <= 0){
      localStorage.setItem("siteBlocked", now + DAY);
      loginErr.textContent = "Too many attempts. Try again after 24 hours.";
      sitePass.disabled = true;
      loginBtn.disabled = true;
    }else{
      loginErr.textContent = `Wrong password. Attempts left: ${attempts}`;
    }
    return;
  }

  localStorage.removeItem("siteAttempts");
  localStorage.removeItem("siteBlocked");
  localStorage.setItem("loginTime", now);

  loginBox.classList.add("hidden");
  content.classList.remove("hidden");
  startTimer();
}

/* ========== APK UNLOCK ========== */
function unlockAPK(){
  const now = Date.now();

  let attempts = parseInt(localStorage.getItem("apkAttempts")) || MAX_ATTEMPTS;
  let blocked  = parseInt(localStorage.getItem("apkBlocked")) || 0;

  if(now < blocked){
    apkErr.textContent = "Too many attempts. Try again after 24 hours.";
    apkPass.disabled = true;
    apkBtn.disabled = true;
    return;
  }

  if(apkPass.value !== APK_PASSWORD){
    attempts--;
    localStorage.setItem("apkAttempts", attempts);

    if(attempts <= 0){
      localStorage.setItem("apkBlocked", now + DAY);
      apkErr.textContent = "Too many attempts. Try again after 24 hours.";
      apkPass.disabled = true;
      apkBtn.disabled = true;
    }else{
      apkErr.textContent = `Wrong APK password. Attempts left: ${attempts}`;
    }
    return;
  }

  localStorage.removeItem("apkAttempts");
  localStorage.removeItem("apkBlocked");
  apkErr.textContent = "";
  apkLink.classList.remove("hidden");
}

/* ========== TIMER ========== */
function startTimer(){
  setInterval(()=>{
    const t = localStorage.getItem("loginTime");
    const left = DAY - (Date.now() - t);
    if(left <= 0){
      localStorage.clear();
      location.reload();
    }
    const h=Math.floor(left/3600000),
          m=Math.floor(left%3600000/60000),
          s=Math.floor(left%60000/1000);
    sessionTimer.textContent =
      `Session expires in ${h}h ${m}m ${s}s`;
  },1000);
}

/* ========== ON LOAD ========== */
window.onload = ()=>{
  const now = Date.now();

  if(now > (parseInt(localStorage.getItem("siteBlocked"))||0)){
    localStorage.removeItem("siteAttempts");
    localStorage.removeItem("siteBlocked");
  }
  if(now > (parseInt(localStorage.getItem("apkBlocked"))||0)){
    localStorage.removeItem("apkAttempts");
    localStorage.removeItem("apkBlocked");
  }

  // Always hide APK download on refresh
  apkLink.classList.add("hidden");

  const t = localStorage.getItem("loginTime");
  if(t && now - t < DAY){
    loginBox.classList.add("hidden");
    content.classList.remove("hidden");
    startTimer();
  }
};
</script>

</body>
      </html>
